<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eid-viewer: The eid-viewer library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">eid-viewer
   </div>
   <div id="projectbrief">eid-viewer library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The eid-viewer library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library was originally written for the eID Viewer. It allows for reading of identity data from an eID card, as well as interacting with the .eid XML files that the eID Viewer knows. While this is provided as a library to manage identity data and can be used as such, its heritage of being the base of an eID Viewer is still visible in some areas.</p>
<p>This is a C API, but wrapper libraries are also available for Objective-C (on OS X) and C# (on Windows).</p>
<p>A simple application that works with this library would look like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="eid-viewer_8h.html">eid-viewer/eid-viewer.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> newstringdata(<span class="keyword">const</span> EID_CHAR* label, <span class="keyword">const</span> EID_CHAR* data) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Received data with label %s and contents %s\n&quot;</span>, label, data);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> newstate(<span class="keyword">enum</span> <a class="code" href="group___c___a_p_i.html#ga32abb45fcb0a67a1482290d7ab12839e">eid_vwr_states</a> new_state) {</div>
<div class="line">    <span class="keywordflow">switch</span>(new_state) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___c___a_p_i.html#gga32abb45fcb0a67a1482290d7ab12839ead8c065019bea3e2193b80fe77c94996a">STATE_TOKEN_WAIT</a>:</div>
<div class="line">            exit(0);</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structeid__vwr__ui__callbacks.html">eid_vwr_ui_callbacks</a> *callbacks = <a class="code" href="group___c___a_p_i.html#ga8ff602c0d9f7ef27e489c0bf57971f6b">eid_vwr_cbstruct</a>();</div>
<div class="line"> </div>
<div class="line">    callbacks-&gt;<a class="code" href="structeid__vwr__ui__callbacks.html#a8ec3758288d9e7c0f638a7a923a4094f">newstate</a> = <a class="code" href="structeid__vwr__ui__callbacks.html#a8ec3758288d9e7c0f638a7a923a4094f">newstate</a>;</div>
<div class="line">    callbacks-&gt;<a class="code" href="structeid__vwr__ui__callbacks.html#a1f071c60f551e3332020463514adb3cc">newstringdata</a> = <a class="code" href="structeid__vwr__ui__callbacks.html#a1f071c60f551e3332020463514adb3cc">newstringdata</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group___c___a_p_i.html#ga2caa7ca6dcd1f1b6439e2b7d9cea75ed">eid_vwr_createcallbacks</a>(callbacks);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group___c___a_p_i.html#ga1067dddf0cf4d2aea8afdc98e4614fb4">eid_vwr_be_mainloop</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aeid-viewer_8h_html"><div class="ttname"><a href="eid-viewer_8h.html">eid-viewer.h</a></div><div class="ttdoc">Main include file.</div></div>
<div class="ttc" id="agroup___c___a_p_i_html_ga1067dddf0cf4d2aea8afdc98e4614fb4"><div class="ttname"><a href="group___c___a_p_i.html#ga1067dddf0cf4d2aea8afdc98e4614fb4">eid_vwr_be_mainloop</a></div><div class="ttdeci">void * eid_vwr_be_mainloop(void *val) NORETURN</div><div class="ttdoc">Loops over waiting function for pkcs11 card and reader insertion/removal event.</div></div>
<div class="ttc" id="agroup___c___a_p_i_html_ga2caa7ca6dcd1f1b6439e2b7d9cea75ed"><div class="ttname"><a href="group___c___a_p_i.html#ga2caa7ca6dcd1f1b6439e2b7d9cea75ed">eid_vwr_createcallbacks</a></div><div class="ttdeci">DllExport int eid_vwr_createcallbacks(struct eid_vwr_ui_callbacks *cb)</div><div class="ttdoc">Initialize the callbacks.</div><div class="ttdef"><b>Definition:</b> oslayer.c:13</div></div>
<div class="ttc" id="agroup___c___a_p_i_html_ga32abb45fcb0a67a1482290d7ab12839e"><div class="ttname"><a href="group___c___a_p_i.html#ga32abb45fcb0a67a1482290d7ab12839e">eid_vwr_states</a></div><div class="ttdeci">eid_vwr_states</div><div class="ttdoc">Possible states.</div><div class="ttdef"><b>Definition:</b> oslayer.h:75</div></div>
<div class="ttc" id="agroup___c___a_p_i_html_ga8ff602c0d9f7ef27e489c0bf57971f6b"><div class="ttname"><a href="group___c___a_p_i.html#ga8ff602c0d9f7ef27e489c0bf57971f6b">eid_vwr_cbstruct</a></div><div class="ttdeci">struct eid_vwr_ui_callbacks * eid_vwr_cbstruct()</div><div class="ttdoc">Create the eid_vwr_ui_callbacks struct.</div><div class="ttdef"><b>Definition:</b> backend.c:63</div></div>
<div class="ttc" id="agroup___c___a_p_i_html_gga32abb45fcb0a67a1482290d7ab12839ead8c065019bea3e2193b80fe77c94996a"><div class="ttname"><a href="group___c___a_p_i.html#gga32abb45fcb0a67a1482290d7ab12839ead8c065019bea3e2193b80fe77c94996a">STATE_TOKEN_WAIT</a></div><div class="ttdeci">@ STATE_TOKEN_WAIT</div><div class="ttdoc">The card has been read, we're now waiting for events to do something else.</div><div class="ttdef"><b>Definition:</b> oslayer.h:80</div></div>
<div class="ttc" id="astructeid__vwr__ui__callbacks_html"><div class="ttname"><a href="structeid__vwr__ui__callbacks.html">eid_vwr_ui_callbacks</a></div><div class="ttdoc">Callbacks which the backend can perform towards the UI.</div><div class="ttdef"><b>Definition:</b> oslayer.h:128</div></div>
<div class="ttc" id="astructeid__vwr__ui__callbacks_html_a1f071c60f551e3332020463514adb3cc"><div class="ttname"><a href="structeid__vwr__ui__callbacks.html#a1f071c60f551e3332020463514adb3cc">eid_vwr_ui_callbacks::newstringdata</a></div><div class="ttdeci">void(* newstringdata)(const EID_CHAR *label, const EID_CHAR *data)</div><div class="ttdoc">new string data to be displayed in UI.</div><div class="ttdef"><b>Definition:</b> oslayer.h:170</div></div>
<div class="ttc" id="astructeid__vwr__ui__callbacks_html_a8ec3758288d9e7c0f638a7a923a4094f"><div class="ttname"><a href="structeid__vwr__ui__callbacks.html#a8ec3758288d9e7c0f638a7a923a4094f">eid_vwr_ui_callbacks::newstate</a></div><div class="ttdeci">void(* newstate)(enum eid_vwr_states new_state)</div><div class="ttdoc">State machine transition.</div><div class="ttdef"><b>Definition:</b> oslayer.h:222</div></div>
</div><!-- fragment --><p>For more information, please see the <a class="el" href="group___c___a_p_i.html">C API</a></p>
<p>The same example in Objective-C would look like:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#import &lt;BeidView/oslayer-objc.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">@implementation </span>App : NSObject&lt;<a class="code" href="protocole_i_d_o_s_layer_u_i-p.html">eIDOSLayerUI</a>&gt;</div>
<div class="line">-(void)newstate:(eIDState)state {</div>
<div class="line">    <span class="keywordflow">switch</span>(<a class="code" href="structstate.html">state</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> eIDStateTokenWait:</div>
<div class="line">            exit(0);</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line">-(void)newstringdata:(NSString *)data withLabel:(NSString *)label{</div>
<div class="line">    NSLog(<span class="stringliteral">@&quot;Received data with label %@ and contents %@&quot;</span>, label, data);</div>
<div class="line">}</div>
<div class="line"><span class="keyword">@end</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">    App* a = [[App alloc]init];</div>
<div class="line"> </div>
<div class="line">    [eIDOsLayerBackend setUi:a];</div>
<div class="line">    [eIDOsLayerBackend mainloop];</div>
<div class="line">}</div>
<div class="ttc" id="aprotocole_i_d_o_s_layer_u_i-p_html"><div class="ttname"><a href="protocole_i_d_o_s_layer_u_i-p.html">eIDOSLayerUI-p</a></div><div class="ttdoc">Protocol for implementing a UI.</div><div class="ttdef"><b>Definition:</b> oslayer-objc.h:86</div></div>
<div class="ttc" id="astructstate_html"><div class="ttname"><a href="structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> state.c:71</div></div>
</div><!-- fragment --><p>More details are in the <a class="el" href="group___obj_c.html">Objective-C API overview</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
